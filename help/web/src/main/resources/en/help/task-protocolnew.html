<!--   DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS HEADER.

Copyright 2009 Sun Microsystems, Inc. All rights reserved.
 
Use is subject to License Terms  -->


<a name="task-protocolnew"></a><h4>To Create a Protocol</h4><a name="indexterm-18"></a><ol>
<li><b>In the navigation tree, expand the Configuration node.</b></li>
<li><b>Under the Configuration node, expand the Network Config node.</b></li>
<li><b>Under the Network Config node, select the Protocols node.</b><p>The Protocols page opens.</p></li>
<li><b>On the Protocols page, click New.</b><p>The New Protocol page opens.</p></li>
<li><b>In the Name field, type a unique name for the protocol.</b></li>
<li><b>Select the Security Enabled checkbox to enable security for the protocol.</b><p>This option is disabled by default. If you enable security, you can use
the SSL tab of the Edit Protocol page to modify the security
settings.</p></li>
<li><b>In the Server Name field, type the host name to be used
in the URLs the server sends to the client.</b><p>This name is the alias name if your server uses an alias. If
your server does not use an alias, leave this field blank.</p><p>This value affects URLs the server automatically generates; it does not affect the
URLs for directories and files stored in the server. If your server uses
an alias, the server-name should be the alias name. If a colon and
port number are appended, that port is used in URLs the server
sends to the client.</p></li>
<li><b>In the Adapter field, type the class name of the static resources adapter.</b><p>The default value is <tt>com.sun.grizzly.tcp.StaticResourcesAdapter</tt>.</p></li>
<li><b>From the Default Virtual Server drop-down list, select the virtual  server to
be associated with this protocol.</b><p>Use the Virtual Servers page to define virtual servers.</p></li>
<li><b>In the Max Connections field, type the maximum number of requests that can
be pipelined until the connection is closed by the server.</b><p>The Keep-Alive subsystem periodically polls idle connections. The default value is 250.</p><p>Set this property to 1 to disable HTTP/1.0 keep-alive, as well as
HTTP/1.1 keep-alive and pipelining. A value of 0 means requests are always rejected. A
value of &#8211;1 sets no limit to the number of keep-alive connections.</p></li>
<li><b>In the Redirect Port field, type the port value to be used
to redirect a request to another port. </b><p>The Enterprise Server automatically redirects the request if these two conditions exist:</p>
<ul><li><p>The network listener that references this protocol is supporting non-SSL requests.</p></li>
<li><p>A request is received for which a matching security constraint requires SSL transport.</p></li></ul>
<p>If a redirect port is not specified, the Enterprise Server uses the
port number specified in the original request. By default, no port is specified.</p></li>
<li><b>In the Send Buffer Size field, type the size in bytes of
the send buffer.</b><p>The default value is 8192 bytes.</p></li>
<li><b>In the Header Buffer Length field, type the size in bytes of
the buffer used by the request processing threads to read the request data.</b><p>The default value is 8192 bytes.</p></li>
<li><b>In the Max Post Size field, type the maximum size in bytes
of POST actions.</b><p>The default value is 2097152 bytes.</p></li>
<li><b>In the Compression Minimum Size field, type the minimum size of a file
when compression is applied.</b><p>This value must be set if the Compression Enabled checkbox is selected. (set
to on or force) The default value is 2048 bytes.</p></li>
<li><b>In the Connection Upload Timeout field, type the timeout for uploads, in milliseconds.
</b><p>This field is applicable only if the Upload Timeout Disabled checkbox is selected.
The default value is 30000 milliseconds.</p></li>
<li><b>In the Request Timeout field, type the number of seconds before a request
times out.</b><p>If the request is not processed before the timeout value is reached, the
request is ignored. The default value is 30 seconds.</p></li>
<li><b>In the Timeout field, type the maximum time in seconds that a connection
can be deemed as idle and kept in the keep-alive state.</b><p>A value of 0 or less means that keep-alive connections are kept open
indefinitely. The default value is 30 seconds.</p></li>
<li><b>In the No-Compression User Agents field, type a comma-separated list of regular expressions
matching user-agents of HTTP clients for which compression should not be used.</b><p>By default, this value is an empty string.</p></li>
<li><b>In the Restricted User Agent field, type a list of restricted user agents
on which HTTP compression is applied.</b><p>If no user agents are specified, HTTP compression is applied to all user
agents. By default, no user agents are specified.</p></li>
<li><b>In the URI Encoding field, type the name of the character set used
to decode the request URIs received.</b><p>The value must be a valid IANA character set name. The default value
is UTF-8.</p></li>
<li><b>In the Version field, type the version of the HTTP protocol used.</b><p>The default value is HTTP/1.1.</p></li>
<li><b>In the Compressible Mime Type field, type a comma-separated list of MIME types
for which HTTP compression is used.</b><p>The default value is <tt>text/html,text/xml,text/plain</tt>.</p></li>
<li><b>Select the Comet Support Enabled checkbox to enable Comet support for the network
listener that references this protocol.</b><p>By default, this option is disabled. If your servlet or JSP page uses
Comet technology, make sure it is initialized when the Enterprise Server starts up
by adding the <tt>load-on-startup</tt> element to your <tt>web.xml</tt> file. For example:</p><pre>&#60;servlet>
&#60;servlet-name>CheckIn&#60;/servlet-name>
&#60;servlet-class>CheckInServlet&#60;/servlet-class>
&#60;load-on-startup>0&#60;/load-on-startup>
&#60;/servlet></pre></li>
<li><b>Select the Upload Timeout Enabled checkbox to cause the connection for a servlet
that reads bytes slowly to be closed after the Connection Upload Timeout limit
is reached.</b><p>If this option is disabled, servlet connections do not time out. This option
is disabled by default.</p></li>
<li><b>Select the DNS Lookup Enabled checkbox to enable DNS lookup.</b><p>This option is disabled by default.</p></li>
<li><b>Select the RCM Support Enabled checkbox to enable Resource Configuration Management (RCM).</b><p>This option is disabled by default.</p></li>
<li><b>Select the Trace Enabled checkbox to enable the TRACE operation.</b><p>If this option is disabled, the Enterprise Server is less susceptible to cross-site
scripting attacks. This option is enabled by default.</p></li>
<li><b>From the Compression combo box, select the setting for the use of HTTP/1.1
GZIP compression to save server bandwidth.</b><p>Available values are:</p><dl><dt><tt>off</tt></dt>
<dd><p>Disables compression. This value is the default.</p></dd>
<dt><tt>on</tt></dt>
<dd><p>Compresses data.</p></dd>
<dt><tt>force</tt></dt>
<dd><p>Forces data compression in all cases.</p></dd>
<dt><i>positive-integer-value</i></dt>
<dd><p>Specifies the minimum amount of data required before the output is compressed.</p></dd>
</dl>
<p>If the <tt>content-length</tt> is not known, the output is compressed only if compression
is set to <tt>on</tt> or <tt>force</tt>.</p></li>
<li><b>Select the Auth Pass Through Enabled checkbox to indicate that the network listener
that uses this protocol receives traffic from an SSL-terminating proxy server.</b><p>This option is disabled by default.</p></li>
<li><b>Select the Chunking Enabled checkbox to enable HTTP response chunking.</b><p>This option is enabled by default.</p></li>
<li><b>Select the XPowered By Enabled checkbox to tell the Enterprise Server to use
<tt>X-Powered-By</tt> headers according to the Java Servlet 2.4 and Java Server Pages 2.0
specifications.</b><p>This option is enabled by default.</p></li>
<li><b>Select the Status Enabled checkbox to enable the file cache.</b><p>This option is enabled by default.</p></li>
<li><b>In the Max Age field, type the maximum age, in seconds, for
a valid cache entry.</b><p>This parameter controls how long cached information is used after a file has
been cached. An entry older than the maximum age is replaced by a
new entry for the same file. If your content changes infrequently, increase this
value for improved performance.</p><p>The optimum maximum age depends on whether existing files are modified regularly. For
example, if files are modified four times a day at regular intervals, consider
setting the maximum age to 21600 seconds (6 hours). Otherwise, consider setting the
maximum age to the longest time for which you are willing to serve
the previous version of a file after the file has been modified.</p><p>The default value is 30.</p></li>
<li><b>In the Max Cache Size field, type the maximum total size (in
bytes) of the file cache on disk.</b><p>The default value is 10485760.</p></li>
<li><b>In the Max File Count field, type the maximum number of files that
can be stored in the file cache.</b><p>If the value is too big, the server caches little-needed files, which wastes
memory. If the value is too small, the benefit of caching is lost.
Try different values of this attribute to find the optimal solution for specific
applications.</p><p>The default value is 1024.</p></li></ol><h6>Next Steps</h6><p>After you create a protocol, you can create a network listener that uses
the protocol.</p><h6>See Also</h6>
<ul><li><p><a href="task-networklistenernew.html">To Create a Network Listener</a></p></li>
<li><p><a href="task-networklisteneredit.html">To Edit a Network Listener</a></p></li>
<li><p><a href="task-networklistenerdelete.html">To Delete a Network Listener</a></p></li>
<li><p><a href="task-protocoledit.html">To Edit a Protocol</a></p></li>
<li><p><a href="task-protocolssledit.html">To Edit SSL Settings for a Protocol</a></p></li>
<li><p><a href="task-protocolhttpedit.html">To Edit HTTP Settings for a Protocol</a></p></li>
<li><p><a href="task-protocolfilecacheedit.html">To Edit File Cache Settings for a Protocol</a></p></li>
<li><p><a href="task-protocoldelete.html">To Delete a Protocol</a></p></li>
<li><p><a href="task-transportnew.html">To Create a Transport</a></p></li>
<li><p><a href="task-transportedit.html">To Edit a Transport</a></p></li>
<li><p><a href="task-transportdelete.html">To Delete a Transport</a></p></li></ul>

