<!--   DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS HEADER.

Copyright 2009 Sun Microsystems, Inc. All rights reserved.
 
Use is subject to License Terms  -->


<a name="task-jdbcconnectionpooladvance"></a><h4>To Edit JDBC Connection Pool Advanced Attributes</h4><a name="indexterm-11"></a><ol>
<li><b>In the navigation tree, expand the Resources node.</b></li>
<li><b>Under the Resources node, select the JDBC node.</b></li>
<li><b>Under the JDBC node, select the Connection Pools node.</b><p>The Connection Pools page opens.</p></li>
<li><b>On the Connection Pools page, click the name of the pool that you
are editing.</b><p>The Edit Connection Pool page opens.</p></li>
<li><b>On the Edit Connection Pool page, click the Advanced tab.</b><p>The Edit Connection Pool Advanced Attributes page opens.</p></li>
<li><b>In the Statement Timeout field, type the length of time, in seconds, after
which abnormally long running queries will be terminated.</b><p>Enterprise Server will set <tt>QueryTimeout</tt> on the statements created. Set the value to -1
to disable this option. The default value is -1.</p></li>
<li><b>In the Statement Cache Size field, type the number of statements to be
cached using the LRU (Least Recently Used) caching mechanism.</b><p>To disable statement caching, specify a value of 0. The default value is
0.</p></li>
<li><b>In the Init SQL field, type an SQL string to be executed
whenever a connection is created (not reused) in the pool.</b><p>Execution of this string initializes the state of the connection.</p></li>
<li><b>In the SQL Trace Listeners field, type a comma-separated list of listener implementation
class names to specify that SQL statements executed by applications will be traced.</b><p>The listener classes must implement the <tt>org.glassfish.api.jdbc.SQLTraceListener</tt> interface. Use of listeners enables easy filtering
of log messages for the SQL statements and helps administrators analyze the statements.</p></li>
<li><b>Select the Wrap JDBC Objects Enabled checkbox for applications to get wrapped JDBC
objects for <tt>Statement</tt>, <tt>PreparedStatement</tt>, <tt>CallableStatement</tt>, <tt>ResultSet</tt>, <tt>DatabaseMetaData</tt>. </b><p>This option is enabled by default.</p></li>
<li><b>Select the Pooling checkbox to enable connection pooling for the pool.</b><p>This option is enabled by default.</p></li>
<li><b>In the Validate At Most Once field, type the amount of time,
in seconds, after which a connection is validated at most once.</b><p>This will help reduce the number of validation requests by a connection. The
default value is 0.</p></li>
<li><b>In the Leak Timeout field, type the amount of time, in seconds, to
trace connection leaks in a connection pool.</b><p>Use this field to detect potential connection leaks by the application. A connection
that is not returned back to the pool by the application within the
specified period is assumed to be potentially leaking, and a stack trace of
the caller is logged. Set the value to 0 to disable connection leak
tracing. The default value is 0.</p><p>Use this field along with Leak Reclaim to avoid potential connection leaks from
the application.</p></li>
<li><b>Select the Leak Reclaim checkbox to restore leaked connections to the pool after
leak connection tracing is complete.</b><p>This option is disabled by default.</p></li>
<li><b>In the Creation Retry Attempts field, type the number of attempts that will
be made if there is a failure in creating a new connection.</b><p>Set the value to 0 to make no attempts to create the
connection again. The default value is 0.</p></li>
<li><b>In the Retry Interval field, type the interval, in seconds, between two attempts
to create a connection.</b><p>The default value is 10. This attribute is used only if the value
of Creation Retry Attempts is greater than 0.</p></li>
<li><b>Select the Lazy Association Enabled checkbox to associate a physical connection with a
logical collection only when the connection is used.</b><p>Connections are disassociated when the transaction is completed and a component method ends,
which helps reuse of the physical connections. If this option is disabled, a
physical connection is associated with a logical connection even before it is used.
This option is disabled by default.</p></li>
<li><b>Select the Lazy Connection Enlistment Enabled checkbox to enlist a resource to the
transaction only when it is actually used in a method.</b><p>This option is disabled by default.</p></li>
<li><b>Select the Associate with Thread Enabled checkbox to create associations between connections and
threads.</b><p>When the same thread is in need of another connection, it can reuse
the connection already associated with that thread, thereby not incurring the overhead of
getting another connection from the pool. This option is disabled by default.</p></li>
<li><b>Select the Match Connections Enabled checkbox to enable connection matching for the pool.</b><p>If this option is enabled, a connection that is selected from the pool
should be matched with connections that have certain credentials. This option must be
enabled if the connection pool is used by applications that have multiple user
credentials. This option can be disabled if the administrator knows that the connections
in the pool will always be homogeneous and therefore a connection picked from
the pool does not need to be matched by the resource adapter. This
option is disabled by default.</p></li>
<li><b>In the Max Connection Usage field, type the number of times a connection
should be reused by the pool.</b><p>Once a connection is reused for the specified number of times, it will
be closed. By limiting the number of times a connection can be reused,
you can avoid statement leaks if an application does not close statements. Set
the value to 0 disable this attribute. The default value is 0.</p></li>
<li><b>Select the Connection Validation Required checkbox to enable connection validation.</b><p>Connection validation allows the server to reconnect in case of failure.</p></li>
<li><b>From the Validation Method drop-down list, select a validation method.</b><p>The Enterprise Server can validate database connections in the following ways.</p><dl><dt><tt>auto-commit</tt> and <tt>metadata</tt></dt>
<dd><p>The Enterprise Servervalidates a connection by calling the <tt>con.getAutoCommit</tt> and <tt>con.getMetaData</tt> methods. </p>
<hr><p><b>Note - </b>Many JDBC drivers cache the results of these calls. As a result, using these calls might not always provide reliable validations. Check with the driver vendor to determine whether these calls are cached or not.</p>
<hr>
</dd>
<dt><tt>custom-validation</tt></dt>
<dd><p>The Enterprise Server uses a user-defined validation mechanism specified by the custom implementation class in the Validation Classname field.</p></dd>
<dt><tt>table</tt></dt>
<dd><p>The application queries the database table that is specified. The table must exist and be accessible, but it does not require any rows. Do not use an existing table that has a large number of rows, or a table that is already frequently accessed.</p></dd>
</dl>
</li>
<li><b>If you selected <tt>table</tt> from the Validation Method drop-down list, select the name
of the database table from the Table Name drop-down list.</b></li>
<li><b>If you selected <tt>custom-validation</tt> from the Validation Method drop-down list, type the custom
validation implementation class name.</b><p>The class name provided must be accessible to the Enterprise Server. The specified
class must implement the <tt>org.glassfish.api.jdbc.ConnectionValidation</tt> interface.</p></li>
<li><b>Select the On Any Failure Close All Connections checkbox to have the server
close and reestablish all connections in the pool in the event of a
single connection failure.</b><p>If this option is disabled, individual connections are reestablished only when they are
used. This option is disabled by default.</p></li>
<li><b>Select the Allow Non Component Callers Enabled checkbox to allow the pool to
be used by non-component callers such as servlet filters and third-party persistence managers.</b><p>Connections obtained by non-component callers are not automatically closed at the end of
a transaction by the container. They must be explicitly closed by the caller.
This option is disabled by default.</p></li>
<li>(Optional) <b>Click the Flush button to flush all connections from the pool.</b><p>Clicking the Flush button destroys any existing connections, recreates connections established for the
pool, and restores the pool to its initial and minimum pool size.</p></li>
<li><b>Click Save.</b>
<hr><p><b>Tip - </b>To return to the default settings, click the Load Defaults button, then click
Save.</p>
<hr>
</li></ol><h6>See Also</h6>
<ul><li><p><a href="task-setdbaccess.html">To Set Up Database Access</a></p></li>
<li><p><a href="task-integratejdbcdriver.html">To Integrate a JDBC Driver</a></p></li>
<li><p><a href="task-jdbcresourcenew.html">To Create a JDBC Resource</a></p></li>
<li><p><a href="task-jdbcresourcesedit.html">To Edit a JDBC Resource</a></p></li>
<li><p><a href="task-jdbcresourcesdelete.html">To Delete a JDBC Resource</a></p></li>
<li><p><a href="task-jdbcconnectionpoolnew.html">To Create a JDBC Connection Pool</a></p></li>
<li><p><a href="task-jdbcconnectionpooledit.html">To Edit JDBC Connection Pool General Settings</a></p></li>
<li><p><a href="task-verifyconnpoolsettings.html">To Verify Connection Pool Settings</a></p></li>
<li><p><a href="task-jdbcconnectionpoolproperty.html">To Edit JDBC Connection Pool Properties</a></p></li>
<li><p><a href="task-jdbcconnectionpooldelete.html">To Delete a JDBC Connection Pool</a></p></li></ul>

