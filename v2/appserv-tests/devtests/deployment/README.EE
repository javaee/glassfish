UNIT TESTS ON DEPLOYMENT
========================

There are 3 test senarios in running the deployment dev tests on an EE 
installation, i.e. running tests on DAS or on remote instances or on cluster.
The tests should be run on, at least, DAS and remote server before checkin to
ensure the checkin quality. For cluster related fixes, the tests should be 
run on DAS and cluster

** It is assumed that the masster password is changeit **

FOR RUNNING THE DEPLOYMENT TESTS ON SE/EE w/ DAS :
--------------------------------------------------
1. In addition to setting APS_HOME etc. (as reqd by earlier), set environment
   variable SECURE to true (e.g. export SECURE=true on ksh)

2. Start the DAS (i.e. domain1 in the default case.) using command
   asadmin start-domain --user <user> --password <pwd>

3. Run the tests using "ant all".


FOR RUNNING THE DEPLOYMENT TESTS ON SE/EE w/ remote instances :
---------------------------------------------------------------

1. In addition to setting APS_HOME etc. (as reqd by earlier), set the 
   following environment variables 
   SECURE to be true (e.g. export SECURE=true on ksh)

2. Set DEPL_TARGET to SERVER (e.g. export DEPL_TARGET=SERVER on ksh)

3. Run the tests using "ant all-ee".

NOTE : no need to to start a domain manually before starting the tests; setting
       the env DEPL_TARGET will result in creation and starting of a remote
       instance. All test modules will be deployed on this instance 
       named deploy-server.

FOR RUNNING THE DEPLOYMENT TESTS ON SE/EE w/ remote instances & clusters :
--------------------------------------------------------------------------

1. In addition to setting APS_HOME etc. (as reqd by earlier), set the 
   following environment variables 
   SECURE to be true (e.g. export SECURE=true on ksh)

2. Set DEPL_TARGET to CLUSTER (e.g. export DEPL_TARGET=CLUSTER on ksh)

3. Run the tests using "ant all-ee".

NOTE : no need to to start a domain manually before starting the tests; setting
       the env DEPL_TARGET will result in creation and starting of a remote
       instance. All test modules will be deployed on this instance 
       named deploy-server.

Please NOTE.  You might want to do the following anyway before starting the tests:

Overcoming 'ant' compile problem :
----------------------------------
In some cases the ant test clients run out of memory during the test run.
To avoid this problem, add -Xmx999m to the command that starts the ant java vm

Here is how to do that :

cat `which ant` :

(... go towards bottom of ant script and add the option -Xmx999m as shown below)

 "$JAVACMD" -Xmx999m -classpath "$LOCALCLASSPATH" -Dant.home="${ANT_HOME}" $ANT_OPTS org.apache.tools.ant.Main $ANT_ARGS "$@"

