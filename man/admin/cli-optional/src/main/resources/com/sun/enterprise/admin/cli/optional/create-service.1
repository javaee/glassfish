
asadmin Utility Subcommands                     create-service(1)

NAME
     create-service - configures the starting  of  a  DAS  on  an
     unattended boot

SYNOPSIS
     create-service [--help] [--name name]
     [--serviceproperties serviceproperties]
     [--dry-run={false|true}] [--domaindir domaindir] [domain_name]

DESCRIPTION
     The create-service subcommand configures the starting  of  a
     domain administration server (DAS)  on an unattended boot on
     Windows and Oracle Solaris systems.

     If no arguments  are  specified,  the  subcommand  uses  the
     default domain.

     This subcommand is supported in local mode only.

  Behavior of create-service on Windows Systems
     On Windows systems, the create-service subcommand creates  a
     Windows  service to represent the DAS. After this subcommand
     creates the service,  you  must  use  the  Windows  Services
     Manager  or  the  Windows  Services  Wrapper to start, stop,
     uninstall, or install the service.

     The  subcommand  creates  the  following  Windows   Services
     Wrapper  files  for the service in the domain-dir\bin direc-
     tory:

         o    Configuration file: service-nameService.xml

         o    Executable file: service-nameService.exe

  Behavior of create-service on Oracle Solaris Systems
     On Oracle Solaris  systems,  the  create-service  subcommand
     creates  a  Service  Management  Facility  (SMF)  service to
     represent the DAS. After this subcommand  creates  the  ser-
     vice,  you  must use SMF commands to start, enable, disable,
     delete, or stop the service.

     This subcommand must  be  run  as  the  OS-level  user  with
     superuser  privileges.  The DAS configuration must be stored
     in a directory to which the superuser has access and  cannot
     be  stored  on a network file system. The service is created
     such that it is controlled by the OS-level user who owns the
     directory where the configuration of the DAS resides.

Java EE 6           Last change: 19 May 2010                    1

asadmin Utility Subcommands                     create-service(1)

     To run this subcommand, you must have solaris.smf.* authori-
     zation.  (Refer to the man pages for the useradd and usermod
     commands.) On Oracle Solaris, the manifest file  is  created
     in    the    /var/svc/manifest/application/GlassFish/domain-
     name_domain-root-dir directory. You  must  also  have  write
     permission        in        the        directory        tree
     /var/svc/manifest/application/GlassFish.    Usually,     the
     superuser  has both these permissions. To run these commands
     as non-root user, the system administrator must be contacted
     so  that  the relevant authorizations are granted.  You must
     also ensure that the following conditions are met:

         o    Oracle Solaris 10 administration commands  such  as
              svccfg,  svcs,  and auths are available through the
              PATH statement, so that these commands can be  exe-
              cuted.  A simple test to do so is to issue the com-
              mand which svccfg in the shell.

         o    You  must  have  write  permission  for  the   path
              /var/svc/manifest/application/GlassFish.

OPTIONS
     --help
     -?

         Displays the help text for the subcommand.

     --domaindir
         The directory where the domain is to be started. This is
         the absolute path of the directory on the disk that con-
         tains the configuration of the domain.

     --dry-run

         Previews your attempt to  create  a  service.  Indicates
         issues  and  the  outcome that will occur if you run the
         command without using the --dry-run option.  Nothing  is
         actually configured. Default is false.

     --name
         The name of the service that you will use when  adminis-
         tering  the  service through Oracle Solaris SMF commands
         or  the  service  management  features  of  the  Windows
         operating  system.  If  a  default is present, this name
         overrides the default.

     --serviceproperties

         (Oracle Solaris systems  only)   Specifies  a  colon(:)-

Java EE 6           Last change: 19 May 2010                    2

asadmin Utility Subcommands                     create-service(1)

         separated  list  of various properties that are specific
         to the service. For Oracle Solaris 10,  if  you  specify
         net_privaddr,  the  service's  processes will be able to
         bind to the privileged ports (<1024)  on  the  platform.
         You  can  bind  to  ports< 1024 only if the owner of the
         service is superuser, otherwise, this is not allowed.

OPERANDS
     domain_name

         The name of the domain to be started. If  no  domain  is
         specified, the default domain is used.

EXAMPLES
     Example 1 Creating a Service on a Windows System

     This example creates a service for the default domain  on  a
     system that is running Windows.

       asadmin> create-service
       Found the Windows Service and successfully uninstalled it.
       The Windows Service was created successfully.  It is ready to be started.  Here are
       the details:
       ID of the service: domain1
       Display Name of the service:domain1 GlassFish Server
       Domain Directory: C:\glassfishv3\glassfish\domains\domain1
       Configuration file for Windows Services Wrapper: C:\glassfishv3\glassfish\domains\
       domain1\bin\domain1Service.xml
       The service can be controlled using the Windows Services Manager or you can use the
       Windows Services Wrapper instead:
       Start Command:  C:\glassfishv3\glassfish\domains\domain1\bin\domain1Service.exe  start
       Stop Command:   C:\glassfishv3\glassfish\domains\domain1\bin\domain1Service.exe  stop
       Uninstall Command:  C:\glassfishv3\glassfish\domains\domain1\bin\domain1Service.exe
       uninstall
       Install Command:  C:\glassfishv3\glassfish\domains\domain1\bin\domain1Service.exe
       install

       This message is also available in a file named PlatformServices.log in the domain's
       root directory
       Command create-service executed successfully.

     Example 2 Creating a Service on an Oracle Solaris System

     This example creates a service for the default domain  on  a
     system that is running Oracle Solaris.

Java EE 6           Last change: 19 May 2010                    3

asadmin Utility Subcommands                     create-service(1)

       asadmin> create-service
       The Service was created successfully. Here are the details:
       Name of the service:application/GlassFish/domain1
       Type of the service:Domain
       Configuration location of the service:/home/gfuser/glassfish-installations
       /glassfishv3/glassfish/domains
       Manifest file location on the system:/var/svc/manifest/application
       /GlassFish/domain1_home_gfuser_glassfish-installations_glassfishv3
       _glassfish_domains/Domain-service-smf.xml.
       You have created the service but you need to start it yourself.
       Here are the most typical Solaris commands of interest:
       * /usr/bin/svcs  -a | grep domain1  // status
       * /usr/sbin/svcadm enable domain1 // start
       * /usr/sbin/svcadm disable domain1 // stop
       * /usr/sbin/svccfg delete domain1 // uninstall
       Command create-service executed successfully.

EXIT STATUS
     0                           subcommand executed successfully

     1                           error in executing  the  subcom-
                                 mand

SEE ALSO
     asadmin(1M)

Java EE 6           Last change: 19 May 2010                    4

