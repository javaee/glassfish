
asadmin Utility Subcommands                     create-cluster(1)

NAME
     create-cluster - creates a GlassFish Server cluster

SYNOPSIS
     create-cluster [--help] [--config config-name]
     [--systemproperties (name=value)[:name=value]*]
     [--properties (name=value)[:name=value]*]
     [--gmsenabled={true|false}]
     [--multicastport multicast-port]
     [--multicastaddress multicast-address]
     [--bindaddress bind-address]
     [--hosts hadb-host-list]
     [--haagentport port-number]
     [--haadminpassword password]
     [--haadminpasswordfile file-name] [--devicesize devicesize ]
     [--haproperty (name=value)[:name=value]*]
     [--autohadb=false] [--portbase port-number]
     cluster-name

DESCRIPTION
     The create-cluster subcommand  creates  a  GlassFish  Server
     cluster.  Initially the cluster contains no GlassFish Server
     instances, applications, or resources.

     A cluster requires a reference to  the  named  configuration
     that  defines  the  configuration  of all instances that are
     added to the cluster. The configuration can be specified  in
     the  command  to create the cluster, but is not required. If
     no configuration is specified, the subcommand creates a con-
     figuration  that  is named cluster-name-config for the clus-
     ter. The cluster that is created  is  a  standalone  cluster
     because  the  cluster's configuration is not shared with any
     other clusters or standalone instances.

     To add instances to the cluster, set the --cluster option to
     the  name  of the cluster when using either of the following
     subcommands:

         o    create-instance(1)

         o    create-local-instance(1)

     To delete server instances from the cluster at any time, use
     one of the following subcommands:

         o    delete-instance(1)

         o    delete-local-instance(1)

Java EE 6           Last change: 21 Oct 2010                    1

asadmin Utility Subcommands                     create-cluster(1)

     To associate applications and resources with  all  instances
     in  the  cluster, set the --target option to the name of the
     cluster when performing the following operations:

         o    Deploying applications by using the deploy(1)  sub-
              command

         o    Creating resources by  using  subcommands  such  as
              create-jdbc-resource(1)

         o    Creating  references  to  applications   that   are
              already  deployed  in  other  targets  by using the
              create-application-ref(1) subcommand

         o    Creating references to resources that  are  already
              created  in  other  targets  by  using  the create-
              resource-ref(1) subcommand

     This subcommand is supported in remote mode only.

OPTIONS
     --help
     -?

         Displays the help text for the subcommand.

     --config
         Specifies  the  named  configuration  that  the  cluster
         references. The configuration must exist and must not be
         named default-config or server-config. If the configura-
         tion name specifies a standalone configuration, an error
         occurs. Specifying the --config option creates a  shared
         cluster.   If this option is omitted, a standalone clus-
         ter is created.

     --systemproperties

         Defines system properties for the configuration that  is
         created  for  the cluster. These properties override the
         property values in the default-config configuration. The
         following properties are available:

         HTTP_LISTENER_PORT
             This property specifies the port number of the  port
             that  is  used  to  listen  for HTTP requests. Valid
             values are 1-65535. On UNIX, creating  sockets  that
             listen    on   ports   1-1024   requires   superuser
             privileges.

Java EE 6           Last change: 21 Oct 2010                    2

asadmin Utility Subcommands                     create-cluster(1)

         HTTP_SSL_LISTENER_PORT

             This property specifies the port number of the  port
             that  is  used  to listen for HTTPS requests.  Valid
             values are 1-65535. On UNIX, creating  sockets  that
             listen    on   ports   1-1024   requires   superuser
             privileges.

         IIOP_LISTENER_PORT
             This property specifies the port number of the  port
             that  is used for IIOP connections. Valid values are
             1-65535. On UNIX, creating sockets  that  listen  on
             ports 1-1024 requires superuser privileges.

         IIOP_SSL_LISTENER_PORT

             This property specifies the port number of the  port
             that  is  used  for  secure  IIOP connections. Valid
             values are 1-65535. On UNIX, creating  sockets  that
             listen    on   ports   1-1024   requires   superuser
             privileges.

         IIOP_SSL_MUTUALAUTH_PORT
             This property specifies the port number of the  port
             that is used for secure IIOP connections with client
             authentication.

         JMX_SYSTEM_CONNECTOR_PORT

             This property specifies the port number on which the
             JMX  connector listens. Valid values are 1-65535. On
             UNIX, creating sockets that listen on  ports  1-1024
             requires superuser privileges.

     --properties
         Defines properties for the cluster. The  following  pro-
         perties are available:

         gms-member-type

             Specifies to the Group Management Service (GMS)  the
             member type of each instance in the cluster.

             Possible values are as follows:

Java EE 6           Last change: 21 Oct 2010                    3

asadmin Utility Subcommands                     create-cluster(1)

             CORE

                 The instance is available to provide high  avai-
                 lability services to the cluster, such as repli-
                 cation of session state data, failover, and load
                 balancing (default).

             SPECTATOR
                 The instance can be  administered  through  cen-
                 tralized  administration of the cluster but does
                 not assist computation for the cluster.

             These values are case insensitive.

             For the  domain  administration  server  (DAS),  the
             value  of this property is set to SPECTATOR and can-
             not be changed.

             If this property is set directly  to  SPECTATOR,  no
             instance  can  provide high availability services to
             the cluster. If you require some  instances  in  the
             cluster  to  be of type SPECTATOR, use a system pro-
             perty  to  set  the  type  individually   for   each
             instance.

             For  example,  use  the  create-system-properties(1)
             subcommand   to  create  the  system  property  GMS-
             MEMBER-TYPE-cluster-name. Then set  the  gms-member-
             type  property  of the cluster to ${GMS-MEMBER-TYPE-
             cluster-name}  to  specify  the   system   property.
             Finally,  for  each instance in the cluster, set the
             GMS-MEMBER-TYPE-cluster-name system property to  the
             required type.

     --gmsenabled

         Specifies whether GMS is enabled for the cluster.

         Possible values are as follows:

         true
             GMS is enabled for the cluster (default).

             When GMS is enabled for a cluster, GMS is started in
             each  server instance in the cluster and in the DAS.
             The DAS participates in each cluster for which  this
             option is set to true.

Java EE 6           Last change: 21 Oct 2010                    4

asadmin Utility Subcommands                     create-cluster(1)

         false

             GMS is disabled for the cluster.

     --multicastaddress
         The address on which GMS listens for group events.  This
         option  must  specify  a  multicast address in the range
         224.0.0.0  through  239.255.255.255.  The   default   is
         228.9.XX.YY, where XX and YY are automatically generated
         independent values between 0 and 255.

     --multicastport

         The port number  of  communication  port  on  which  GMS
         listens  for  group  events.  This option must specify a
         valid port number in the range 2048-32000.  The  default
         is an automatically generated value in this range.

     --bindaddress
         The Internet Protocol (IP) address of the network inter-
         face to which GMS binds. This option must specify the IP
         address of a local network interface. The default is all
         public network interface addresses.

         On a multihome machine, this option configures the  net-
         work  interface  that  used  for  the  GMS.  A multihome
         machine possesses two or more network interfaces.

         To specify an address that is valid  for  all  GlassFish
         Server  instances  in the cluster, use a system property
         to set the address individually for each instance.

         For example, use the create-system-properties subcommand
         to   create   the  system  property  GMS-BIND-INTERFACE-
         ADDRESS-cluster-name. Then set the --bindaddress  option
         of   this  subcommand  to  ${GMS-BIND-INTERFACE-ADDRESS-
         cluster-name} to specify the system  property.  Finally,
         for  each  instance  in  the  cluster, set the GMS-BIND-
         INTERFACE-ADDRESS-cluster-name system  property  to  the
         required  network  interface  address  on the instance's
         machine.

     --hosts

         Do not specify this option. This option is retained  for
         compatibility  with  other releases. If you specify this
         option, a syntax error does not occur. Instead, the sub-
         command runs successfully and the option is ignored.

Java EE 6           Last change: 21 Oct 2010                    5

asadmin Utility Subcommands                     create-cluster(1)

     --haagentport

         Do not specify this option. This option is retained  for
         compatibility  with  other releases. If you specify this
         option, a syntax error does not occur. Instead, the sub-
         command runs successfully and the option is ignored.

     --haadminpassword
         Do not specify this option. This option is retained  for
         compatibility  with  other releases. If you specify this
         option, a syntax error does not occur. Instead, the sub-
         command runs successfully and the option is ignored.

     --haadminpasswordfile

         Do not specify this option. This option is retained  for
         compatibility  with  other releases. If you specify this
         option, a syntax error does not occur. Instead, the sub-
         command runs successfully and the option is ignored.

     --devicesize
         Do not specify this option. This option is retained  for
         compatibility  with  other releases. If you specify this
         option, a syntax error does not occur. Instead, the sub-
         command runs successfully and the option is ignored.

     --haproperty

         Do not specify this option. This option is retained  for
         compatibility  with  other releases. If you specify this
         option, a syntax error does not occur. Instead, the sub-
         command runs successfully and the option is ignored.

     --autohadb
         Do not specify this option. This option is retained  for
         compatibility  with  other releases. If you specify this
         option, a syntax error does not occur. Instead, the sub-
         command runs successfully and the option is ignored.

     --portbase

         Do not specify this option. This option is retained  for
         compatibility  with  other releases. If you specify this
         option, a syntax error does not occur. Instead, the sub-
         command runs successfully and the option is ignored.

Java EE 6           Last change: 21 Oct 2010                    6

asadmin Utility Subcommands                     create-cluster(1)

OPERANDS
     cluster-name                A  unique  identifier  for   the
                                 cluster to be created.

EXAMPLES
     Example 1 Creating a Cluster

     This example creates a cluster that is named ltscluster  for
     which   port 1169 is to be used for secure IIOP connections.
     Because the --config option is not  specified,  the  cluster
     references  a copy of the named configuration default-config
     that is named ltscluster-config.

       asadmin> create-cluster
       --systemproperties IIOP_SSL_LISTENER_PORT=1169
       ltscluster
       Command create-cluster executed successfully.

EXIT STATUS
     0                           command executed successfully

     1                           error in executing the command

SEE ALSO
     create-application-ref(1), create-instance(1),  create-jdbc-
     resource(1),    create-local-instance(1),   create-resource-
     ref(1),   delete-cluster(1),   delete-instance(1),   delete-
     local-instance(1),   deploy(1),   list-clusters(1),   start-
     cluster(1), stop-cluster(1)

     asadmin(1M)

Java EE 6           Last change: 21 Oct 2010                    7

